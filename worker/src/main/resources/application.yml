server:
  compression_enabled: true
  port: ${LOCAL_PORT:8080}

logging:
  level:
    com.picpay.banking.jdpi.clients: ${FEIGN_CLIENTS_LOG_LEVEL:INFO}

feign:
  client:
    config:
      default:
        logger-level: FULL
  compression:
    request:
      enabled: true
      mime-types: text/xml,application/xml,application/json
      min-request-size: 2048
    response:
      enabled: true
      useGzipDecoder: true

picpay:
  ispb: 22896431

pix:
    bacen:
      dict:
        url: ${BACEN_AWS_URL}
        entries:
          url: ${BACEN_AWS_URL}/dict/api
      url: ${BACEN_AWS_URL}

spring:
  profiles:
    active:
      - database
      - messaging
      - bacen
  main:
    banner-mode: off
  application:
    name: dict-infraction-worker
  redis:
    enabled: false
  kafka:
    bootstrap-servers: ${KAFKA_SERVERS}
    consumer:
      auto-offset-reset: latest
  cloud:
    stream:
      bindings:
        new-infraction-reports:
          destination: ${INFRACTION_ACKNOWLEDGMENT_TOPIC}
          group: dict
          contentType: application/json
          consumer:
            maxAttemps: ${SYNC_MAX_ATTEMPTS}
            configuration:
              max.poll.records: ${SYNC_MAX_POLL_RECORDS}
              max.poll.interval.ms: ${SYNC_MAX_POLL_INTERVAL}
            partitionCount: 1
            concurrency: 1
        claim-notifications-consumer:
          destination: ${CLAIM_NOTIFICATIONS_TOPIC}
          group: claim-notification-consumer-group
          contentType: application/json
#          consumer:
#            maxAttemps: ${SYNC_MAX_ATTEMPTS}
#            configuration:
#              max.poll.records: ${SYNC_MAX_POLL_RECORDS}
#              max.poll.interval.ms: ${SYNC_MAX_POLL_INTERVAL}
#            partitionCount: 1
#            concurrency: 1
        send-new-claim-notification:
          destination: ${PIX_ALERT_NOTIFICATION_TOPIC}
          binder: kafka
        alert-notifications:
          destination: ${ALERT_NOTIFICATION_TOPIC}
          contentType: application/json
          producer:
            partitionCount: 1

management:
  health:
    diskspace:
      enabled: false
  endpoint:
    health:
      show-details: always
  endpoints:
    web:
      exposure:
        include: prometheus, health
      base-path: '/'
      path-mapping:
        prometheus: 'metrics'